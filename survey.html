<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Customer Survey / é¡§å®¢ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ</title>
  <style>
    :root{--bg:#f7f7fb;--card:#fff;--text:#1f2937;--muted:#6b7280;--accent:#3b82f6;--radius:16px;--shadow:0 10px 25px rgba(0,0,0,.08)}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans JP","PingFang SC","Hiragino Kaku Gothic ProN","Apple SD Gothic Neo","Malgun Gothic",sans-serif;background:var(--bg);color:var(--text)}
    .wrap{max-width:880px;margin:40px auto;padding:0 16px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
    h1{font-size:clamp(20px,3vw,28px);margin:0}
    .lang{display:flex;gap:8px;flex-wrap:wrap}
    .lang button{padding:8px 12px;border:1px solid #e5e7eb;background:#fff;border-radius:999px;cursor:pointer}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:20px}
    .row{margin:18px 0}
    label.title{display:block;font-weight:600;margin-bottom:8px;font-size:18px}
    .muted{color:var(--muted);font-size:14px}
    .emoji-scale{display:flex;justify-content:space-between;align-items:center;gap:8px;font-size:32px;cursor:pointer;user-select:none}
    .emoji{transition:.2s transform, .2s opacity;opacity:.6}
    .emoji.active{transform:scale(1.2);opacity:1}
    .emoji:active{transform:scale(1.08)}
    .actions{display:flex;gap:12px;flex-wrap:wrap;margin-top:24px}
    .btn{padding:12px 16px;border:none;border-radius:12px;background:var(--accent);color:#fff;font-weight:600;cursor:pointer}
    .toast{display:none;margin-top:12px;padding:12px 14px;border-radius:12px;background:#ecfdf5;color:#065f46}
    .toast.show{display:block}
    .footer{margin:20px 0;color:var(--muted);font-size:13px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1 id="t_title">é¡§å®¢ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ</h1>
      <div class="lang" aria-label="language switcher">
        <button data-lang="ja" aria-pressed="true">æ—¥æœ¬èª</button>
        <button data-lang="en">English</button>
        <button data-lang="ko">í•œêµ­ì–´</button>
        <button data-lang="zht">ç¹é«”ä¸­æ–‡</button>
      </div>
    </header>

    <div class="card">
      <div class="row"><div class="muted" id="t_intro">ã”åˆ©ç”¨ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ã‚µãƒ¼ãƒ“ã‚¹å‘ä¸Šã®ãŸã‚ã€1åˆ†ã ã‘ãŠæ™‚é–“ã‚’ãã ã•ã„ã€‚</div></div>

      <div class="row">
        <label class="title" id="t_fun">ğŸ‰ æ¥½ã—ã• / Fun</label>
        <div class="emoji-scale" id="funScale" role="radiogroup" aria-label="Fun rating">
          <span class="emoji" data-v="1" aria-label="1">ğŸ˜</span>
          <span class="emoji" data-v="2" aria-label="2">ğŸ˜</span>
          <span class="emoji" data-v="3" aria-label="3">ğŸ™‚</span>
          <span class="emoji" data-v="4" aria-label="4">ğŸ˜ƒ</span>
          <span class="emoji" data-v="5" aria-label="5">ğŸ¤©</span>
        </div>
      </div>

      <div class="row">
        <label class="title" id="t_taste">ğŸœ ç¾å‘³ã—ã• / Deliciousness</label>
        <div class="emoji-scale" id="tasteScale" role="radiogroup" aria-label="Deliciousness rating">
          <span class="emoji" data-v="1" aria-label="1">ğŸ˜</span>
          <span class="emoji" data-v="2" aria-label="2">ğŸ˜</span>
          <span class="emoji" data-v="3" aria-label="3">ğŸ™‚</span>
          <span class="emoji" data-v="4" aria-label="4">ğŸ˜ƒ</span>
          <span class="emoji" data-v="5" aria-label="5">ğŸ¤©</span>
        </div>
      </div>

      <div class="row">
        <label class="title" id="t_consent_title">ãƒ‡ãƒ¼ã‚¿åŒæ„</label>
        <label class="muted"><input id="consent" type="checkbox" /> <span id="t_consent">åŒ¿åã§é›†è¨ˆã—ã¾ã™ã€‚é€ä¿¡ã§åˆ©ç”¨è¦ç´„ã«åŒæ„ã—ã¾ã™ã€‚</span></label>
      </div>

      <div class="actions">
        <button class="btn" id="submitBtn">é€ä¿¡</button>
      </div>

      <div class="toast" id="toast">ã”å›ç­”ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼</div>
      <div class="footer" id="t_footer">ã“ã®ãƒ•ã‚©ãƒ¼ãƒ ã¯ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ã‚‚å‹•ä½œã—ã€ãƒ‡ãƒ¼ã‚¿ã¯ç«¯æœ«å†…ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ï¼‰ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚</div>
    </div>
  </div>

  <script>
  (function(){
    // i18n dictionary
    const dict={
      ja:{t_title:'é¡§å®¢ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ',t_intro:'ã”åˆ©ç”¨ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ã‚µãƒ¼ãƒ“ã‚¹å‘ä¸Šã®ãŸã‚ã€1åˆ†ã ã‘ãŠæ™‚é–“ã‚’ãã ã•ã„ã€‚',t_fun:'ğŸ‰ æ¥½ã—ã• / Fun',t_taste:'ğŸœ ç¾å‘³ã—ã• / Deliciousness',t_consent_title:'ãƒ‡ãƒ¼ã‚¿åŒæ„',t_consent:'åŒ¿åã§é›†è¨ˆã—ã¾ã™ã€‚é€ä¿¡ã§åˆ©ç”¨è¦ç´„ã«åŒæ„ã—ã¾ã™ã€‚',t_footer:'ã“ã®ãƒ•ã‚©ãƒ¼ãƒ ã¯ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ã‚‚å‹•ä½œã—ã€ãƒ‡ãƒ¼ã‚¿ã¯ç«¯æœ«å†…ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ï¼‰ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚',btn_submit:'é€ä¿¡',toast:'ã”å›ç­”ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼'},
      en:{t_title:'Customer Survey',t_intro:'Thank you for visiting! Please take a moment to rate your experience.',t_fun:'ğŸ‰ Fun',t_taste:'ğŸœ Deliciousness',t_consent_title:'Data Consent',t_consent:'Anonymous results only. By submitting, you agree to the terms.',t_footer:'This form works offline. Data is stored locally (browser).',btn_submit:'Submit',toast:'Thank you for your feedback!'},
      ko:{t_title:'ê³ ê° ì„¤ë¬¸',t_intro:'ì´ìš©í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ë” ë‚˜ì€ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•´ 1ë¶„ë§Œ í‰ê°€í•´ ì£¼ì„¸ìš”.',t_fun:'ğŸ‰ ì¬ë¯¸ / Fun',t_taste:'ğŸœ ë§›ìˆìŒ / Deliciousness',t_consent_title:'ë°ì´í„° ë™ì˜',t_consent:'ìµëª…ìœ¼ë¡œ ì§‘ê³„í•©ë‹ˆë‹¤. ì „ì†¡ ì‹œ ì´ìš© ì•½ê´€ì— ë™ì˜í•œ ê²ƒìœ¼ë¡œ ê°„ì£¼ë©ë‹ˆë‹¤.',t_footer:'ì´ í¼ì€ ì˜¤í”„ë¼ì¸ì—ì„œë„ ë™ì‘í•˜ë©° ë°ì´í„°ëŠ” ë¸Œë¼ìš°ì €ì— ì €ì¥ë©ë‹ˆë‹¤.',btn_submit:'ì œì¶œ',toast:'ì†Œì¤‘í•œ ì˜ê²¬ ê°ì‚¬í•©ë‹ˆë‹¤!'},
      zht:{t_title:'é¡§å®¢å•å·',t_intro:'æ„Ÿè¬æ‚¨çš„å…‰è‡¨ï¼ç‚ºäº†æå‡æœå‹™ï¼Œè«‹èŠ± 1 åˆ†é˜è©•åˆ†ã€‚',t_fun:'ğŸ‰ æœ‰è¶£ç¨‹åº¦ / Fun',t_taste:'ğŸœ ç¾å‘³ç¨‹åº¦ / Deliciousness',t_consent_title:'è³‡æ–™åŒæ„',t_consent:'åƒ…åšåŒ¿åçµ±è¨ˆã€‚æäº¤å³è¡¨ç¤ºåŒæ„ä½¿ç”¨æ¢æ¬¾ã€‚',t_footer:'æœ¬è¡¨å–®å¯é›¢ç·šä½¿ç”¨ï¼Œè³‡æ–™å„²å­˜åœ¨æœ¬æ©Ÿç€è¦½å™¨ã€‚',btn_submit:'æäº¤',toast:'æ„Ÿè¬æ‚¨çš„å¡«å¯«ï¼'}
    };
    const $=id=>document.getElementById(id);
    function setLang(lang){
      const t=dict[lang]||dict.ja;
      for(const k in t){const el=$(k); if(el) el.textContent=t[k];}
      document.querySelector('#submitBtn').textContent=t.btn_submit;
      localStorage.setItem('survey_lang',lang);
      document.querySelectorAll('.lang button').forEach(b=>b.setAttribute('aria-pressed',String(b.dataset.lang===lang)));
      document.documentElement.lang = (lang==='zht' ? 'zh-Hant' : lang);
    }
    document.querySelectorAll('.lang button').forEach(btn=>btn.addEventListener('click',()=>setLang(btn.dataset.lang)));

    // Emoji rating
    let funVal=0,tasteVal=0;
    function bindScale(id,setter){
      const emojis=document.querySelectorAll(`#${id} .emoji`);
      emojis.forEach(e=>e.addEventListener('click',()=>{
        const v=Number(e.dataset.v);
        setter(v);
        emojis.forEach(x=>x.classList.toggle('active',Number(x.dataset.v)===v));
      }));
    }
    bindScale('funScale',v=>funVal=v);
    bindScale('tasteScale',v=>tasteVal=v);

    // Storage
    const KEY='ramen_survey_v7';
    const load=()=>{try{return JSON.parse(localStorage.getItem(KEY)||'[]')}catch(e){return []}};
    const save=(rows)=>{try{localStorage.setItem(KEY,JSON.stringify(rows))}catch(e){} };

    setLang(localStorage.getItem('survey_lang')||'ja');

    $('submitBtn').addEventListener('click',()=>{
      if(!funVal||!tasteVal){alert('ã€Œæ¥½ã—ã•ã€ã¨ã€Œç¾å‘³ã—ã•ã€ã‚’é¸ã‚“ã§ãã ã•ã„ / Please rate both. / ë‘ í•­ëª©ì„ ëª¨ë‘ ì„ íƒí•˜ì„¸ìš” / è«‹è©•åˆ†å…©é …');return;}
      if(!$('consent').checked){alert('ã€Œãƒ‡ãƒ¼ã‚¿åŒæ„ã€ã«ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ / Please check consent / ë™ì˜ì— ì²´í¬í•´ ì£¼ì„¸ìš” / è«‹å‹¾é¸è³‡æ–™åŒæ„');return;}
      const row={ts:new Date().toISOString(),lang:localStorage.getItem('survey_lang')||'ja',tanoshisa:funVal,oishisa:tasteVal,consent:'yes'};
      const rows=load(); rows.push(row); save(rows);
      funVal=0; tasteVal=0; document.querySelectorAll('.emoji').forEach(e=>e.classList.remove('active')); $('consent').checked=false;
      const t=dict[localStorage.getItem('survey_lang')||'ja']; const toast=$('toast'); toast.textContent=t.toast; toast.classList.add('show'); setTimeout(()=>toast.classList.remove('show'),2000);
    });
  })();
  </script>
</body>
</html>
